<?xml version="1.0" encoding="UTF-8" ?>
<table xmlns="http://query.yahooapis.com/v1/schema/table.xsd">
  <meta>
    <sampleQuery> select * from {table}</sampleQuery>
  </meta>
  <bindings>
    <select produces="XML">
      <urls>
        <url></url>
      </urls>
      <paging model="offset">
        <pagesize id="count" max="300" />
        <total default="10" />
      </paging>
      <inputs>
        <key id='url' type='xs:string' paramType='variable' />
      </inputs>
      <execute><![CDATA[

var keepvid_url;
if(url.toLowerCase().match('youtube.com/')){ 
var querystring = "select match8, match5, match2 from regex where expression="(&fmt_list=)([^&]*)(.*)(&t=)([^&]*)(.*)(video_id=)([^&]*)(&.*)" and text in (select content from html where url='" + url + '"')

keepvid_url = y.query(querystring).results;


}
else{ 
    keepvid_url='http://www.keepvid.com/?url='+escape(url);
}

response.object = keepvid_url





      ]]></execute>
    </select>
  </bindings>
</table>